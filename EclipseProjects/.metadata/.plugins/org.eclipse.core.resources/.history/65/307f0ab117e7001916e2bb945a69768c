package mi.yike.thread;

/**
 * @author wangmeng ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯
 * 
 *
 */
//äº§å“ç±»
class Product {
	String name; // äº§å“å
	double price; // ä»·æ ¼
	boolean flag = false; // äº§å“æ˜¯å¦ç”Ÿæˆå®Œæˆçš„æ ‡å¿—ï¼Œé»˜è®¤ä¸ºFALSEï¼Œæ²¡æœ‰ç”Ÿæˆ

}

//ç”Ÿäº§è€…ç±»
class Producer extends Thread {
	Product product; // äº§å“

	public Producer(String name, Product product) {
		super(name);
		this.product = product;
	}

	@Override
	public void run() {
		int i = 0;
		while (true) {
			synchronized (product) {
				if (!product.flag) {
					if (i % 2 == 0) {
						product.name = "ğŸ";
						try {
							Thread.sleep(1000);
						} catch (InterruptedException e) {

							e.printStackTrace();
						}
						product.price = 5.6;
					} else {
						product.name = "ğŸ“";
						product.price = 10.0;
					}

					i++;
					System.out.println(this.getName() + "ç”Ÿäº§äº†" + product.name + "ä»·é’±ä¸º" + product.price);
product.flag=true;
				}

				else {
					try {
						product.wait();
					} catch (InterruptedException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
				}

			}

		}
	}
}

//æ¶ˆè´¹è€…ç±»
class Consumer extends Thread {
	Product product; // äº§å“

	public Consumer(String name, Product product) {
		// TODO Auto-generated constructor stub
		super(name);
		this.product = product;
	}

	@Override
	public void run() {
		while (true) {
			if (product.flag) {
				synchronized (product) {
					System.out.println(Thread.currentThread().getName() + "æ¶ˆè´¹äº†" + product.name + "ä»·é’±ä¸ºï¼š" + product.price);
				}
			product.flag=false;
			}
			

		}
	}
}

public class Demo2 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Product product = new Product();// äº§å“å¯¹è±¡
		Producer producer = new Producer("ç”Ÿäº§è€…", product); // ç”Ÿäº§è€…å¯¹è±¡
		Consumer consumer = new Consumer("æ¶ˆè´¹è€…", product);// æ¶ˆè´¹è€…å¯¹è±¡
		producer.start(); // å¼€å¯çº¿ç¨‹
		consumer.start();

	}

}
